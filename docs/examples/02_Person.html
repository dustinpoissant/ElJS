<!DOCTYPE html>
<html>
<head>
  <title>Person - Kempo Example</title>
  <script src='../Kempo.js'></script>
  <script>
    /* Define a new custom element that uses the "my-person" tag */
    Kempo("my-person", {
      // When a new "my-person" element is added to the DOM
      added: function(){
        // Say hello to the person in the "name" attribute
        this.innerText = "Hello " + this.getAttribute("name");
      },
      watch: {
        attributes: ["name"] // Watch for changes to the name attribute
      },
      changed: function(changes){
        // When the name attribute changes
        if(changes.attribute && changes.attribute.name == "name"){
          // Say hello to the new name
          this.innerText = "Hello " + changes.attribute.newValue;
        }
      }
    });
  </script>
</head>
<body>
  <!-- Create a new "my-person" element, with a name of "Dustin" -->
  <my-person id='my-person' name="Dustin"></my-person>

  <p><br></p>
  <!-- A Form to change the name -->
  <form id='person-name-form'>
    <input name='new-name' placeholder='New Name' />
    <button type='submit'>Change</button>
  </form>
  <script>/* JavaScript to change the name of the person */
    // When the form is submitted
    document.getElementById("person-name-form").addEventListener("submit", function(event){
      // Get the new name
      var newName = document.getElementsByName("new-name")[0].value;
      if(newName.length){ // If the name is not blank
        // Set the new name
        document.getElementById("my-person").setAttribute("name", newName);
        // Clear the name field
        document.getElementsByName("new-name")[0].value = "";
      }
      // Prevent the form from refreshing the page
      event.preventDefault();
      return false; // Prevent the form from refreshing the page on IE < 11
    });
  </script>
</body>
</html>
